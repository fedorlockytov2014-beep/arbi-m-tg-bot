# ===============================
# ОСНОВНЫЕ НАСТРОЙКИ ПРИЛОЖЕНИЯ
# ===============================

# Уровень логирования приложения
# Возможные значения: DEBUG, INFO, WARNING, ERROR, CRITICAL
# По умолчанию: INFO
log_level: "DEBUG"

# Формат логов
# Возможные значения: JSON, CONSOLE
# JSON - для production среды (машинно-читаемый формат)
# CONSOLE - для разработки (читаемый человеком формат)
log_format: "CONSOLE"

# ===============================
# НАСТРОЙКИ TELEGRAM БОТА
# ===============================

telegram:
  # Токен бота от @BotFather
  # Обязательный параметр
  bot_token: ""
  
  # Максимальное количество одновременных обновлений
  # Оптимизирует обработку сообщений при высокой нагрузке
  max_connections: 100
  
  # Таймаут для Long Polling (в секундах)
  # Используется только при отладке, в продакшене используется вебхуки
  polling_timeout: 30
  
  # Настройки вебхуков
  webhook:
    # Включить/выключить вебхуки
    enabled: true
    
    # URL для приема обновлений от Telegram
    # Должен быть доступен из интернета и использовать HTTPS
    url: "https://your-domain.com/webhook "
    
    # Путь к SSL сертификату (если используется самоподписанный)
    cert_path: "/path/to/cert.pem"
    
    # Порт, на котором будет работать приложение
    port: 8443

# ===============================
# НАСТРОЙКИ БАЗЫ ДАННЫХ
# ===============================

database:
  # URL подключения к PostgreSQL
  # Формат: postgresql://user:password@host:port/database
  url: "postgresql+asyncpg://user:password@localhost:5432/warehouse_bot"
  
  # Включить/выключить логирование SQL запросов
  # Рекомендуется использовать только в разработке
  echo_sql: false
  
  # Максимальное количество соединений в пуле
  max_connections: 20
  
  # Таймаут запросов к базе данных (в секундах)
  query_timeout: 30

# ===============================
# НАСТРОЙКИ КЕШИРОВАНИЯ
# ===============================

cache:
  # Включить/выключить кеширование
  enabled: true
  
  # URL подключения к Redis
  redis_url: "redis://localhost:6379/0"
  
  # TTL для различных типов данных (в секундах)
  ttl:
    # Кеширование статистики за сегодня
    stats_today: 60
    
    # Кеширование статистики за неделю
    stats_week: 60
    
    # Кеширование статистики за месяц
    stats_month: 900
    
    # Кеширование данных о складе
    warehouse_data: 3600
  
  # Максимальное количество элементов в кеше
  max_items: 10000

# ===============================
# НАСТРОЙКИ ИНТЕГРАЦИИ С CRM
# ===============================

crm:
  # Базовый URL API CRM системы
  base_url: "https://api.biyk.ru/api/"
  
  # Токен авторизации для доступа к API CRM
  api_token: ""
  
  # Таймаут для запросов к API CRM (в секундах)
  timeout: 15
  
  # Максимальное количество попыток при ошибках
  max_retries: 3
  
  # Задержка между повторными попытками (в секундах)
  retry_delay: 2
  
  # Коды HTTP статусов, при которых не следует повторять запрос
  no_retry_statuses: [400, 401, 403, 404]

# ===============================
# НАСТРОЙКИ ХРАНЕНИЯ ФОТОГРАФИЙ
# ===============================

photo_storage:
  # Тип хранилища фотографий
  # Возможные значения: TELEGRAM, AWS_S3, LOCAL
  type: "TELEGRAM"
  
  # Настройки для AWS S3 (если type = AWS_S3)
  s3:
    bucket_name: "warehouse-orders-photos"
    region: "eu-central-1"
    access_key: "YOUR_ACCESS_KEY"
    secret_key: "YOUR_SECRET_KEY"
    endpoint_url: null  # Для совместимых с S3 сервисов (MinIO и т.д.)
  
  # Настройки для локального хранения (если type = LOCAL)
  local:
    storage_path: "/var/lib/warehouse_bot/photos"
    base_url: "https://your-domain.com/photos/ "  # URL для доступа к файлам

# ===============================
# НАСТРОЙКИ БЕЗОПАСНОСТИ
# ===============================

security:
  # Список ID администраторов, имеющих доступ к специальным командам
  admin_ids: [123456789, 987654321]
  
  # Максимальное количество попыток ввода кода активации
  max_activation_attempts: 3
  
  # Период блокировки после превышения попыток (в минутах)
  activation_block_time: 15
  
  # Максимальное количество фотографий для одного заказа
  max_photos_per_order: 3
  
  # Максимальное время приготовления в минутах (ограничение для валидации)
  max_cooking_time_minutes: 180

# ===============================
# НАСТРОЙКИ СТАТИСТИКИ
# ===============================

statistics:
  # Статусы заказов, учитываемые при расчете статистики
  included_statuses:
    - "ready_for_delivery"
    - "on_delivery"
    - "delivered"
    
  # Статусы заказов, не учитываемые при расчете статистики
  excluded_statuses:
    - "cancelled"
    - "new"
    - "sent_to_partner"
    - "accepted_by_partner"
    - "cooking"
    
  # Максимальный период для запроса статистики (в днях)
  max_period_days: 365

# ===============================
# НАСТРОЙКИ ВЕБХУКОВ (для CRM)
# ===============================

webhook:
  # Хост, на котором будет работать вебхук-сервер
  host: "0.0.0.0"
  
  # Порт, на котором будет работать вебхук-сервер
  port: 8000
  
  # Секретный ключ для проверки подписей вебхуков от CRM
  secret_key: "your-webhook-secret-key"